# Add Rails helpers
if ENV['RAILS_ENV'] || (defined?(Rails) && Rails.env)
  extend Rails::ConsoleMethods if defined?(Pry)

  class Object
    def change_log(stream)
      ActiveRecord::Base.logger = Logger.new(stream)
    end

    def show_log
      change_log(STDOUT)
    end

    def hide_log
      change_log(nil)
    end

    def show_session(session)
      Marshal.load(Base64.decode64(session))
    end

    def find_me
      @dat_me ||= User.find_by_username('stephenmckinney')
    end
  end
end

# Add Chorus-specific Rails helpers
if (ENV['RAILS_ENV'] || (defined?(Rails) && Rails.env)) && ENV['PWD'].split('/').last == 'sbn'
  class Object
    def find_sbn() @dat_sbn ||= Community.find_by_domain('sbnation.com') end
    def find_polygon() @dat_poly ||= Community.find_by_domain('polygon.com') end
    def find_verge() @dat_verge ||= Community.find_by_domain('theverge.com') end
    def current_community() @dat_curr ||= find_verge end
  end
end
